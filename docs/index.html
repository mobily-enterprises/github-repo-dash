<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data:; script-src 'self'; style-src 'self' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; connect-src 'self' https://api.github.com https://fonts.googleapis.com https://fonts.gstatic.com; object-src 'none'; base-uri 'self';" />
  <title>Developer's Dashboard · Repo Triage</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop stop-color='%234de1d3' offset='0%25'/%3E%3Cstop stop-color='%23f36565' offset='100%25'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect rx='12' ry='12' x='4' y='4' width='56' height='56' fill='%2311192f' stroke='%234de1d3' stroke-width='3'/%3E%3Cpath d='M18 20h28v5H18zm0 10h18v5H18zm0 10h12v5H18z' fill='url(%23g)'/%3E%3C/svg%3E">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <a class="skip-link" href="#controls-panel">Skip to dashboard controls</a>
  <div class="page">
    <header>
      <div class="title">
        <div class="pill-row">
          <span class="pill">Developer's Dashboard</span>
          <a class="github-link" href="https://github.com/mobily-enterprises/github-repo-dash" target="_blank" rel="noopener" aria-label="Open GitHub repository">
            <svg class="github-icon" viewBox="0 0 16 16" aria-hidden="true">
              <path d="M8 .198a8 8 0 0 0-2.53 15.598c.4.074.547-.174.547-.386 0-.19-.007-.693-.01-1.36-2.226.483-2.695-1.073-2.695-1.073-.364-.924-.89-1.17-.89-1.17-.727-.497.055-.487.055-.487.804.057 1.227.826 1.227.826.715 1.225 1.874.872 2.33.667.073-.518.28-.872.508-1.073-1.777-.202-3.646-.888-3.646-3.955 0-.874.313-1.588.824-2.148-.083-.202-.357-1.017.078-2.12 0 0 .67-.215 2.197.82a7.63 7.63 0 0 1 2-.269 7.6 7.6 0 0 1 2 .269c1.527-1.035 2.196-.82 2.196-.82.436 1.103.162 1.918.08 2.12.513.56.824 1.274.824 2.148 0 3.073-1.871 3.75-3.653 3.947.288.248.544.738.544 1.488 0 1.073-.01 1.937-.01 2.201 0 .214.146.463.55.384A8 8 0 0 0 8 .198Z"></path>
            </svg>
            <span>mobily-enterprises/github-repo-dash</span>
          </a>
        </div>
        <h1 id="repo-title">Repository triage snapshot</h1>
        <p>Live counts and recent items for the core searches. Adjust the repo or the DRI token if you want to reuse this
          for another project.</p>
      </div>
      <div class="controls" id="controls-panel">
        <div class="control-row">
          <label>Repository
            <input id="repo" type="text" placeholder="owner/repo" aria-label="Repository" />
          </label>
          <label>Your handle
            <input id="handle" type="text" value="@me" aria-label="Handle" />
          </label>
          <label title="Optional; stored on this device (localStorage)">
            <span class="label-title">GitHub token <span class="help-icon" aria-label="Stored on this device (localStorage); clear manually if needed" title="Stored on this device (localStorage). Clear manually if needed.">?</span></span>
            <p id="token-hint" class="sr-only">Token is stored in localStorage on this device; clear it if you are on a shared computer.</p>
            <div class="token-input-row">
              <input id="token" type="password" placeholder="ghp_xxx" aria-label="GitHub token" aria-describedby="token-hint" />
              <button id="clear-token" class="mini-btn icon-btn" type="button" aria-label="Clear token">×</button>
            </div>
          </label>
        </div>
        <details class="advanced">
          <summary>Advanced (DRI token &amp; coder flags)</summary>
          <div class="advanced-grid">
            <label>DRI text in PR body/label
              <input id="dri" type="text" value="DRI:@" aria-label="DRI token" />
            </label>
            <label>Coder flag in body
              <input id="coder-body-flag" type="text" value="coder" aria-label="Coder flag in body" />
            </label>
            <label>Coder flag in labels
              <input id="coder-label-flag" type="text" value="DRI_is_coder" aria-label="Coder flag in labels" />
            </label>
            <label class="checkbox-row">
              <input id="use-labels" type="checkbox" aria-label="Look in body for DRI and coder flags" />
              <span>Look in body for DRI:@… and coder flags (off = labels)</span>
            </label>
          </div>
        </details>
      </div>
    </header>

    <section>
      <div class="section-header">
        <h2>Your pull requests</h2>
        <div class="actions">
          <button id="load-pulls" aria-controls="prs-grid">Load</button>
          <div id="status-pulls" class="status" role="status" aria-live="polite">Not loaded</div>
        </div>
      </div>
      <div class="grid" id="prs-grid"></div>
    </section>

    <section>
      <div class="section-header">
        <h2>PR assigning and triaging</h2>
        <div class="actions">
          <button id="load-triage" aria-controls="triage-priority-grid triage-grid">Load</button>
          <div id="status-triage" class="status" role="status" aria-live="polite">Not loaded</div>
        </div>
      </div>
      <div class="grid priority-grid" id="triage-priority-grid"></div>
      <div class="grid" id="triage-grid"></div>
    </section>

    <section>
      <div class="section-header">
        <h2>Issues</h2>
        <div class="actions">
          <button id="load-issues" aria-controls="issues-grid">Load</button>
          <div id="status-issues" class="status" role="status" aria-live="polite">Not loaded</div>
        </div>
      </div>
      <div class="grid" id="issues-grid"></div>
    </section>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
